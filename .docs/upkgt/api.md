# API

## UPKGT API Документация

### Содержание

1. Обзор
2. Командная строка
3. Интеграция с оболочками
4. Коды возврата

### Обзор

UPKGT предоставляет несколько интерфейсов для взаимодействия:

* Интерфейс командной строки (CLI) - основной способ взаимодействия
* Интеграция с оболочками - для удобства использования
* Коды возврата - для использования в скриптах

### Командная строка

#### Формат команд

```bash
upkgt [глобальные опции] команда [опции команды] [аргументы]
```

#### Глобальные опции

```bash
--config ФАЙЛ     # Путь к конфигурационному файлу
--verbose, -v     # Подробный вывод
--quiet, -q       # Тихий режим
--color РЕЖИМ     # Цветной вывод (auto|always|never)
--debug          # Режим отладки
--profile ТИП    # Профилирование (cpu|mem|trace)
```

#### Возвращаемые значения

```bash
echo $?  # Код последней команды
```

### Интеграция с оболочками

#### Bash

```bash
# Автодополнение 
source /usr/share/bash-completion/completions/upkgt

# Сокращения
alias upi='upkgt install'
alias upr='upkgt remove'
alias upu='upkgt update && upkgt upgrade'
```

#### Zsh

```zsh
# Автодополнение
source /usr/share/zsh/site-functions/_upkgt

# Сокращения
alias upi='upkgt install'
alias upr='upkgt remove'
alias upu='upkgt update && upkgt upgrade'
```

### Коды возврата

#### Основные коды

```bash
0   # Успешное выполнение
1   # Общая ошибка
2   # Ошибка в аргументах командной строки
3   # Ошибка конфигурации
4   # Ошибка прав доступа
5   # Ошибка ввода/вывода
```

#### Коды установки

```bash
10  # Ошибка при установке пакета
11  # Конфликт пакетов
12  # Нарушение зависимостей
13  # Ошибка проверки пакета
14  # Недостаточно места
```

#### Коды удаления

```bash
20  # Ошибка при удалении пакета
21  # Пакет не найден
22  # Пакет требуется другими
23  # Ошибка очистки
```

#### Коды обновления

```bash
30  # Ошибка обновления
31  # Репозиторий недоступен
32  # Ошибка синхронизации
33  # Ошибка загрузки
```

#### Коды безопасности

```bash
40  # Ошибка проверки подписи
41  # Недействительная подпись
42  # Ошибка контрольной суммы
43  # Небезопасная операция
```

#### Коды базы данных

```bash
50  # Ошибка базы данных
51  # Ошибка блокировки
52  # Повреждение базы данных
53  # Ошибка транзакции
```

Примечания:

* Все коды возврата документированы для использования в скриптах
* При написании скриптов рекомендуется проверять коды возврата
* В режиме отладки выводится дополнительная информация об ошибках
* Подробные сообщения об ошибках записываются в логах
